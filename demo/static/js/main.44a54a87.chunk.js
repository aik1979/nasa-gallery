(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,t,n){e.exports=n(392)},336:function(e,t,n){},338:function(e,t,n){},392:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),l=n(55),i=n.n(l),c=(n(227),n(212)),s=n(175),o=n(64),u=n.n(o),h=n(120),m=n(25),f=n(26),d=n(28),g=n(27),p=n(29),b=n(407),E=n(404),v=n(408),P=n(401),x=n(405),j=n(406),O=n(398),y=n(403),C=Array.from({length:3},function(e,t){return t+=1,{key:t*=12,text:t,value:t}}),S=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(r)))).handleKeypress=function(e){if("Enter"===e.key){var t=e.target.value.trim();n.props.onQuery({str:t})}},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.itemsPerPage,a=e.onItemsPerPageChange;return r.a.createElement(O.a,{loading:t,onKeyPress:this.handleKeypress,placeholder:"Search...",icon:"search",fluid:!0,action:r.a.createElement(y.a,{options:C,value:n,onChange:a,compact:!0}),actionPosition:"left"})}}]),t}(a.Component),k=n(400),N=n(393),w=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).handleLoad=function(e){n.setState({loading:!1})},n.state={loading:!0},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state.loading,t=this.props,n=t.item,a=t.onClick;return r.a.createElement(x.a,{onClick:a,item:n},r.a.createElement("div",{className:"card_image"},r.a.createElement(k.a,{active:e}),r.a.createElement(N.a,{className:"actual",src:n.thumb,hidden:e,onLoad:this.handleLoad})),r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Description,null,n.data.title)))}}]),t}(a.Component),I=(n(336),["react","semantic-ui-react"]),L=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).toggleInfScroll=function(e){n.setState(function(e){return{infScroll:!e.infScroll}})},n.handleNextPageLoad=function(e){var t=n.state.infScroll;n.props.onNextPage(t)},n.handleNextBuffer=function(e){n.props.onNextBuffer(),window.scroll({top:0,left:0,behavior:"smooth"})},n.state={infScroll:!1},n.sentinel=r.a.createRef(),n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"componentDidMount",value:function(){var e=this;new IntersectionObserver(function(t){1===t[0].intersectionRatio&&e.props.items.length&&e.state.infScroll&&e.handleNextPageLoad()},{threshold:1}).observe(this.sentinel.current)}},{key:"render",value:function(){var e=this.props,t=e.items,n=e.totalHits,a=e.loading,l=e.onQuery,i=e.itemsPerPage,c=e.onItemsPerPageChange,s=e.onDetails,o=e.nextPageExists,u=e.nextBufferExists,h=this.state.infScroll;return r.a.createElement("div",{className:"container"},r.a.createElement(b.a,{as:"h1",textAlign:"center"},"NASA IMAGES GALLERY APP",r.a.createElement(b.a.Subheader,null,r.a.createElement(E.a,{items:I,horizontal:!0}))),r.a.createElement(v.a.Group,null,r.a.createElement(v.a,null,r.a.createElement(S,{loading:a,onQuery:l,itemsPerPage:i,onItemsPerPageChange:c}),-1!==n&&r.a.createElement("div",{className:"subsearch"},r.a.createElement("strong",null,"got ",n," hits"),r.a.createElement(P.a,{label:"infinite scroll",slider:!0,value:Number(h),onChange:this.toggleInfScroll}))),!!t.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement(v.a,null,r.a.createElement(x.a.Group,{itemsPerRow:4},t.map(function(e){return r.a.createElement(w,{key:e.thumb,item:e,onClick:s})}))),r.a.createElement(v.a,null,r.a.createElement(j.a,{disabled:!o,onClick:this.handleNextPageLoad},"next page"),r.a.createElement(j.a,{disabled:!(!o&&u),onClick:this.handleNextBuffer},"next buffer")))),r.a.createElement("div",{className:"sentinel",ref:this.sentinel,hidden:!(h&&o)}))}}]),t}(a.Component),B=n(402),A=(n(338),function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).handleLoad=function(e){n.setState({loading:!1})},n.handleClose=function(e){n.setState({loading:!0}),n.props.onClose()},n.state={loading:!0},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props.current,t=this.state.loading,n=null!==e,a=e&&e.data||{},l=e&&e.images||[],i=l[l.length-1];l[0];return r.a.createElement(B.a,{open:n,onClose:this.handleClose,centered:!1},r.a.createElement(v.a.Group,{className:"details__group",horizontal:!0},r.a.createElement(v.a,{loading:t},r.a.createElement(N.a,{src:i,onLoad:this.handleLoad,bordered:!0})),r.a.createElement(v.a,null,r.a.createElement(b.a,null,a.title,r.a.createElement(b.a.Subheader,null,r.a.createElement("p",null,a.center),r.a.createElement("p",null,a.date_created))),r.a.createElement("p",null,a.description))))}}]),t}(a.Component)),D=function(e){function t(e){var n;return Object(m.a)(this,t),(n=Object(d.a)(this,Object(g.a)(t).call(this,e))).query=function(){var e=Object(h.a)(u.a.mark(function e(t){var a,r,l,i,c,s,o,h,m,f;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.url,r=t.str,n.setState({loading:!0}),a||(a=encodeURI("https://images-api.nasa.gov/search?q=".concat(r,"&media_type=image"))),e.next=5,fetch(a);case 5:return l=e.sent,e.next=8,l.json();case 8:i=e.sent,c=i.collection,s=c.items,o=c.links,h=c.metadata.total_hits,s=s.map(function(e){return{data:e.data[0],collection:e.href,thumb:e.links[0].href}}),m=o&&o.find(function(e){return"prev"===e.rel}),f=o&&o.find(function(e){return"next"===e.rel}),m=m&&m.href,f=f&&f.href,n.buffer={items:s,prev:m,next:f},n.setState({totalHits:h,loading:!1,nextBufferExists:!!f}),n.getPage();case 19:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),n.getPage=function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=n.buffer,r=n.state.itemsPerPage;e=a.items.slice(0,r),a.items=a.items.slice(r),n.setState(function(n){return{items:t?Object(s.a)(n.items).concat(Object(s.a)(e)):e,nextPageExists:!!a.items.length}})},n.getNextBuffer=function(e){n.query({url:n.buffer.next})},n.handleItemsPerPageChange=function(e,t){var a=t.value;n.setState({itemsPerPage:a})},n.openDetails=function(){var e=Object(h.a)(u.a.mark(function e(t,a){var r,l,i,c,s;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.item,l=r.data,i=r.collection,n.setState({current:{data:l}}),e.next=4,fetch(i);case 4:return e.next=6,e.sent.json();case 6:c=e.sent,s=c.filter(function(e){return e.endsWith("jpg")}),n.setState({current:{data:l,images:s}});case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),n.closeDetails=function(e){n.setState({current:null})},n.buffer={},n.state={items:[],loading:!1,totalHits:-1,itemsPerPage:12,nextPageExists:!1,nextBufferExists:!1,current:null},n}return Object(p.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.state,t=e.current,n=Object(c.a)(e,["current"]);return r.a.createElement(r.a.Fragment,null,r.a.createElement(L,Object.assign({},n,{onQuery:this.query,onItemsPerPageChange:this.handleItemsPerPageChange,onDetails:this.openDetails,onNextPage:this.getPage,onNextBuffer:this.getNextBuffer})),r.a.createElement(A,{current:t,onClose:this.closeDetails}))}}]),t}(a.Component);i.a.render(r.a.createElement(D,null),document.getElementById("root"))}},[[222,2,1]]]);
//# sourceMappingURL=main.44a54a87.chunk.js.map